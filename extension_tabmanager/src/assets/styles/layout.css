/* LAYOUT STYLES */
* { box-sizing: border-box; }

body {
  font-family: 'Segoe UI', Roboto, Arial, sans-serif;
  margin: 0; padding: 0;
  background: var(--bg-body);
  color: var(--text-primary);
  overflow: hidden;
  transition: background 0.3s, color 0.3s;

  /* Disable text selection globally */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Allow selection explicitly for inputs (Search) and editable elements (Active Window Name) */
input, textarea, [contenteditable="true"] {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
  cursor: text;
}

.user-select-none {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

#wrapper { overflow: hidden; position: relative; }

/* Sidebar Structure */
#sidebar {
    position: fixed; top: 70px; left: 0;
    width: 20vw; height: calc(100% - 70px);
    background-color: var(--bg-controls-bar);
    color: var(--text-primary);
    padding: 0 10px;
    z-index: 3;
    transition: transform 0.3s ease-in-out;
    transform: translateX(-20vw);
}

.sidebar-content {
  border-inline: 1px solid var(--border-dark);
  background-color: var(--bg-content-area);
  width: 100%; height: 100%;
  overflow-y: auto;
}

.sidebar-controls {
  padding: 12px;
  display: flex; align-items: center; justify-content: space-between;
  background-color: var(--bg-sidebar);
  flex-shrink: 0; /* Don't shrink */
}

.sidebar-title { margin: 0; font-size: 12px; font-weight: 600; color: var(--text-primary); }

/* Sidebar Toggle Logic */
.sidebar-open #sidebar { transform: translateX(0); }
.sidebar-open .window-viewer-container { margin-left: 20vw; width: calc(100% - 20vw); }

/* Main Viewer Structure */
.window-viewer-container {
  padding-top: 35px;
  display: flex; flex-direction: column;
  height: 100vh; width: 100%;
  transform-origin: 0 0; margin-left: 0;
  transition: margin-left 0.3s ease-in-out, width 0.3s ease-in-out;
}

.window-tabs-bar {
  position: fixed; top: 0; left: 0; width: 100%; z-index: 4;
  background: var(--bg-tabs-bar);
  border-bottom: 1px solid var(--border-dark);
  display: flex; align-items: center;
  height: 35px; flex-shrink: 0;
  transition: background 0.3s;
}

.window-controls-bar {
  background: var(--bg-controls-bar);
  display: flex; align-items: center;
  height: 35px; width: 100vw;
  flex-shrink: 0; top: 35px; left: 0;
  position: fixed; z-index: 5;
  transition: background 0.3s;
  overflow-x: auto;
}

.window-content-area {
  padding-top: 35px; flex: 1; overflow: hidden;
  background: var(--bg-content-area);
  transition: background 0.3s;
}

.window-content {
  border: 2px solid var(--border-dark);
  border-radius: 6px; display: none;
  width: 100%; height: 100%;
  overflow-y: auto; padding: 12px; gap: 12px;
  flex-wrap: wrap; align-content: flex-start;
  position: relative;
}

.window-content.active { display: flex; }

/* Global Utilities & Scrollbars */
.empty-state {
  display: flex; align-items: center; justify-content: center;
  height: 100%; color: var(--text-muted); font-size: 14px;
}

::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-track { background: var(--bg-app); }
::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 5px; border: 2px solid var(--bg-app); }
::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover); }